generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  PROFESSIONAL
  CLIENT
}

model User {
  id             String     @id @default(uuid())
  name           String
  email          String     @unique
  password       String?
  googleId       String?
  calendarId     String?
  role           Role       @default(CLIENT)
  schedule       Schedule[]
  bookings       Booking[]  @relation("UserBookings")
  professionalOf Booking[]  @relation("ProfessionalBookings")
  createdAt      DateTime   @default(now())
}

model Schedule {
  id        String @id @default(uuid())
  user      User   @relation(fields: [userId], references: [id])
  userId    String
  dayOfWeek Int
  startTime String
  endTime   String
}

model Booking {
  id String @id @default(uuid())

  user   User   @relation("UserBookings", fields: [userId], references: [id])
  userId String

  professional   User   @relation("ProfessionalBookings", fields: [professionalId], references: [id])
  professionalId String

  clientName     String
  clientEmail    String
  clientWhatsapp String
  serviceType    String
  date           DateTime
  note           String?
  createdAt      DateTime @default(now())
}
